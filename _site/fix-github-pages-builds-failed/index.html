<!DOCTYPE html>
	<html>
	<head>
	　<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	　<title>香香和耗子的Dreamore</title>
	</head>
	<body>
	　<!-- Page Header -->
<header class="intro-header" style="background-image: url('/img/bantou.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="site-heading">
                    <h1>github pages构建失败问题解决</h1>
                    <hr class="small">
                    <span class="subheading"></span>
                </div>
            </div>
        </div>
    </div>
</header>

<link rel="stylesheet" href="/css/backtop.css">  <!-- Back Top -->
<script type="text/javascript" src="/js/backtop.js"></script>  <!-- Back Top -->

<div id="back-top">
  <a href="#top" title="回到顶部"></a>
</div>

<!-- Main Content -->
<div class="container">
	<div class="row">
		<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
			<h2 id="github-pages构建失败问题解决"><a href="http://blog.xiayf.cn/2013/01/08/fix-github-pages-builds-failed/">github pages构建失败问题解决</a></h2>

<p>2013-01-08 TueBy <a href="http://blog.xiayf.cn/author/youngsterxyf.html">youngsterxyf</a></p>

<p>今天为本博客提交更新后，github pages自动构建始终不成功。原以为是新提交中引入了错误，于是按照<a href="http://blog.xiayf.cn/2013/01/08/git-cancel-commits/">Git操作：强制删除提交到远程版本库的数据与版本记录</a>的方法取消了所有的更新，但依旧没用。</p>

<p>由于构建的结果邮件中只有这样一段话：</p>

<blockquote>
  <p>The page build failed with the following error: page build failed</p>
</blockquote>

<p>关于构建失败的原因一丁点都没有告诉我们，所以根本没法调试嘛。</p>

<p>在阅读github的官方帮助文档<a href="https://help.github.com/articles/pages-don-t-build-unable-to-run-jekyll">Pages don’t build: “Unable to run Jekyll”</a>后，决定按照其中Syntax errors部分的内容做如下尝试：</p>

<p>首先，按照<a href="https://github.com/mojombo/jekyll/wiki/install">jekyll的官方安装文档</a>安装jekyll：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo gem install jekyll
</code></pre></div></div>

<p>然后，在博客的根目录下，执行：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jekyll --safe
</code></pre></div></div>

<p>命令会输出详细的信息，如果构建失败，则在输出的信息中查找错误原因，比如本博客构建失败的原因出在文章的头部添加了如下类似的标记：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>category:
    - Algorithms
</code></pre></div></div>

<p>导致之后一行的tags标记数据在构建时出错。我直接将每次执行构建 <code class="highlighter-rouge">jekyll --safe</code> 提示的错误信息中相关的category标记直接删除(也许其后加个空行就可以了，没尝试过)，然后重新执行构建，依次循环，直到构建成功。然后将数据提交到远程版本库。</p>

<p>由于jekyll本地构建时输出的信息也比较隐晦，很难一下子找到问题所在。比如提示 <code class="highlighter-rouge">Algorithms</code> 元素构建出错，</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Not creating a link for ref_id = "0".Liquid Exception: undefined method `gsub' for ["Algorithms"]:Array in post
</code></pre></div></div>

<p>但没说是哪篇文章的哪一行，没办法只好使用grep查找：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>grep Algorithms _posts/*
</code></pre></div></div>

<p>找出所有存在Algorithms单词的文章，然后逐个文章打开查看。
  *[2013-01-08 Tue]: 2013-01-08T00:00:00+08:00</p>

		</div>
	</div>
</div>

<hr>

	</body>
	</html>